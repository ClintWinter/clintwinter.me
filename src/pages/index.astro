---
interface Frontmatter {
    title: string;
    publishedAt?: string;
}

import { DateTime } from "luxon";
import MainLayout from "../layouts/MainLayout.astro";
import OrnamentDivider from "../components/OrnamentDivider.astro";
import PostRow from "../components/PostRow.astro";
import { guessDateFormat } from "../utils/dates";

const latestPosts = Object.values(
    import.meta.glob<{ frontmatter: Frontmatter; url: string }>('./blog/*.md', { eager: true })
)
    .filter((post) => post.frontmatter.publishedAt)
    .sort((a, b) => new Date(b.frontmatter.publishedAt!).getTime() - new Date(a.frontmatter.publishedAt!).getTime())
    .slice(0, 3);
---

<MainLayout title="Clint Winter" page="home">
    <section>
        <h1 class="text-center font-heading text-4xl font-bold mb-2 text-burgundy">Clint Winter</h1>
        <p class="text-center font-body text-lg italic mb-6 text-muted">Software Engineer</p>
        <div class="font-body text-xl leading-relaxed space-y-4">
            <p class="drop-cap">I am a senior full-stack developer at <a href="https://givebutter.com" rel="noopener noreferrer" class="tactile-link">Givebutter</a>. I've been in the Laravel/PHP ecosystem for 8 years, and I'm loving every minute of it.</p>
        </div>
    </section>

    <OrnamentDivider ornament="❧" />

    <section>
        <h2 class="font-body text-sm font-bold tracking-section uppercase mb-8 text-center text-muted">Correspondence</h2>
        <dl class="grid gap-y-3 font-body text-lg grid-cols-[auto_1fr] md:grid-cols-[1fr_1fr]">
            <dt class="text-right pr-6 italic text-muted">Code</dt>
            <dd class="pl-6"><a href="https://github.com/ClintWinter" rel="noopener noreferrer" class="tactile-link">github.com/ClintWinter</a></dd>
            <dt class="text-right pr-6 italic text-muted">Career</dt>
            <dd class="pl-6"><a href="https://linkedin.com/in/clint-winter" rel="noopener noreferrer" class="tactile-link">linkedin.com/in/clint-winter</a></dd>
            <dt class="text-right pr-6 italic text-muted">Thoughts</dt>
            <dd class="pl-6"><a href="https://x.com/clintwinter13" rel="noopener noreferrer" class="tactile-link">@clintwinter13</a></dd>
            <dt class="text-right pr-6 italic text-muted">Resume</dt>
            <dd class="pl-6"><a href="/assets/ClintWinterResume.pdf" class="tactile-link">ClintWinterResume.pdf</a></dd>
            <dt class="text-right pr-6 italic text-muted">Email</dt>
            <dd class="pl-6"><a href="mailto:clint@clintwinter.me" class="tactile-link">clint@clintwinter.me</a></dd>
        </dl>
    </section>

    <OrnamentDivider ornament="❦" />

    <section>
        <h2 class="font-body text-sm font-bold tracking-section uppercase mb-8 text-center text-muted">Selected Writing</h2>
        <ul class="space-y-4 font-body">
            {latestPosts.map((post) => (
                <li>
                    <PostRow
                        href={post.url}
                        date={guessDateFormat(post.frontmatter.publishedAt!).toLocaleString(DateTime.DATE_MED)}
                    >
                        {post.frontmatter.title}
                    </PostRow>
                </li>
            ))}
        </ul>
        <div class="mt-10 text-center">
            <a href="/blog" class="tactile-link font-body text-xl italic">View full archive →</a>
        </div>
    </section>

    <OrnamentDivider ornament="✻" />
</MainLayout>
